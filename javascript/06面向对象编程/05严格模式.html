<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>严格模式</title>
</head>

<body>
    <script>
        //启用方法
        'use strict';

        //单个函数
        // function strict() {
        //     'use strict';
        //     return '这是严格模式';
        // }

        // function strict2() {
        //     'use strict';
        //     function f() {
        //         return '这也是严格模式';
        //     }
        //     return f();
        // }

        // function notStrict() {
        //     return '这是正常模式';
        // }

        //只读属性不可写
        // 'use strict';
        // 'abc'.length = 5;

        //只设置了取值器的属性不可写
        // 'use strict';
        // var obj = {
        //     get v() { return 1; }
        // };
        // obj.v = 2;

        // 禁止扩展的对象不可扩展
        // 'use strict';
        // var obj = {};
        // Object.preventExtensions(obj);
        // obj.v = 1;

        // eval、arguments 不可用作标识名
        // 'use strict';
        // var eval = 17;
        // var arguments = 17;
        // var obj = { set p(arguments) { } };
        // try { } catch (arguments) { }
        // function x(eval) { }
        // function arguments() { }
        // var y = function eval() { };
        // var f = new Function('arguments', "'use strict'; return 17;");

        // 函数不能有重名的参数
        // function f(a, a, b) {
        //     'use strict';
        //     return a + b;
        // }

        // 禁止八进制的前缀0表示法
        // 'use strict';
        // var n = 0100;

        // 全局变量显式声明
        // 'use strict';

        // v = 1; // 报错，v未声明

        // for (i = 0; i < 2; i++) { // 报错，i 未声明
        //     // ...
        // }

        // function f() {
        //     x = 123;
        // }
        // f() // 报错，未声明就创建一个全局变量

        // 禁止 this 关键字指向全局对象
        // 正常模式
        // function f() {
        //     console.log(this === window);
        // }
        // f() // true

        // // 严格模式
        // function f() {
        //     'use strict';
        //     console.log(this === undefined);
        // }
        // f() // true

        // 禁止使用 fn.callee、fn.caller
        // function f1() {
        //     'use strict';
        //     f1.caller;    // 报错
        //     f1.arguments; // 报错
        // }

        // f1();

        // 禁止使用 arguments.callee、arguments.caller
        // 'use strict';
        // var f = function () {
        //     return arguments.callee;
        // };

        // f(); // 报错

        // 禁止删除变量
        // 'use strict';
        // var x;
        // delete x; // 语法错误

        // var obj = Object.create(null, {
        //     x: {
        //         value: 1,
        //         configurable: true
        //     }
        // });
        // delete obj.x; // 删除成功

        //禁止使用 with 语句
        // 'use strict';
        // var v = 1;
        // var obj = {};

        // with (obj) {
        //     v = 2;
        // }

        // 创设 eval 作用域
        // (function () {
        //     'use strict';
        //     var x = 2;
        //     console.log(eval('var x = 5; x')) // 5
        //     console.log(x) // 2
        // })()

        // arguments 不再追踪参数的变化
        // function f(a) {
        //     a = 2;
        //     return [a, arguments[0]];
        // }
        // f(1); // 正常模式为[2, 2]

        // function f(a) {
        //     'use strict';
        //     a = 2;
        //     return [a, arguments[0]];
        // }
        // f(1); // 严格模式为[2, 1]

        //非函数代码块不得声明函数
        // 'use strict';
        // if (true) {
        //     function f1() { } // 语法错误
        // }

        // for (var i = 0; i < 5; i++) {
        //     function f2() { } // 语法错误
        // }

        //保留字
        // function package(protected) { // 语法错误
        //     'use strict';
        //     var implements; // 语法错误
        // }
    </script>
</body>

</html>